(this["webpackJsonprealtime-chat"]=this["webpackJsonprealtime-chat"]||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"apiKey":"AIzaSyAUMdEb-9sbFa-RXq9IRy6taeWNmXeyyE8","authDomain":"superchat-45caa.firebaseapp.com","projectId":"superchat-45caa","storageBucket":"superchat-45caa.appspot.com","messagingSenderId":"906576704753","appId":"1:906576704753:web:83074ec6f4d1b82835a550","measurementId":"G-GWRGF4W0LP"}')},22:function(e,t,n){},23:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var a=n(3),s=n.n(a),c=n(14),r=n.n(c),i=(n(22),n(7)),o=(n(23),n(10)),u=n(15);n(28);o.a.initializeApp(u);var l=o.a.firestore(),d=n(16),b=n(12),m=n.n(b),j=n(17),p=n(2);var f=function(e){var t=e.messagesRef,n=e.user,s=Object(a.useState)(""),c=Object(i.a)(s,2),r=c[0],u=c[1],l=function(){var e=Object(j.a)(m.a.mark((function e(a){var s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),!(r.trim().length>0)){e.next=8;break}return s=r.trim(),u(""),console.log("sending"),e.next=7,t.add({text:s,createdAt:o.a.firestore.FieldValue.serverTimestamp(),sender:n.nickname,uid:n.uid});case 7:console.log("sent");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{onSubmit:l,className:"footer",children:[Object(p.jsx)("input",{type:"text",value:r,onChange:function(e){return u(e.target.value)},className:"px-2 py-3 bg-gray-500 flex-grow"}),Object(p.jsx)("button",{type:"submit",disabled:0===r.trim().length,className:"bg-blue-900 px-10",children:"Send"})]})};var x=function(e){var t=e.message,n=(e.id,e.user),a=e.formRef,s=t.text,c=t.sender,r=t.uid;return Object(p.jsxs)("div",{ref:a,className:"message text-left ".concat(r===n.uid?"sent":"received"),children:[Object(p.jsx)("div",{className:"sender",children:c}),Object(p.jsx)("div",{className:"text",children:s})]})};var h=function(e){var t=e.user,n=e.onSignOut,s=l.collection("messages"),c=s.orderBy("createdAt","desc").limit(25),r=Object(d.a)(c,{idField:"id"}),o=Object(i.a)(r,1)[0],u=Object(a.useRef)();return Object(a.useEffect)((function(){u.current.scrollIntoView({behavior:"smooth"})}),[o]),Object(p.jsxs)("div",{className:"ChatRoom",children:[Object(p.jsxs)("div",{className:"header",children:[Object(p.jsx)("h1",{className:"font-bold text-2xl self-center",children:"Realtime Chat App"}),Object(p.jsx)("button",{className:"bg-gray-700 py-2 px-5 rounded-sm",onClick:n,children:"Sign Out"})]}),Object(p.jsxs)("div",{className:"main",children:[o&&o.reverse().map((function(e){return Object(p.jsx)(x,{message:e,user:t},e.id)})),Object(p.jsx)("span",{ref:u})]}),Object(p.jsx)(f,{messagesRef:s,user:t})]})},g=n.p+"static/media/logo.6ce24c58.svg";var O=function(e){var t=Object(a.useState)(""),n=Object(i.a)(t,2),s=n[0],c=n[1];return Object(p.jsxs)("div",{className:"px-8 md:px-16 min-h-screen",children:[Object(p.jsx)("div",{className:"h-16"}),Object(p.jsx)("img",{src:g,alt:"Application logo",className:"App-logo"}),Object(p.jsx)("h1",{className:"text-2xl font-bold text-center mb-16",children:"Realtime Chat Application"}),Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),""===s.trim()?alert("Enter a valid nickname"):e.onSubmit(s)},children:[Object(p.jsx)("div",{children:"Nickname: "}),Object(p.jsx)("input",{type:"text",value:s,onChange:function(e){return c(e.target.value)},className:"w-full rounded bg-gray-500 p-2 text-gray-100 mb-4"}),Object(p.jsx)("button",{type:"submit",className:"bg-blue-400 p-2 mb-2 w-full rounded hover:bg-blue-500",children:"Enter Chat Room"})]})]})};var v=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(p.jsx)("div",{className:"App",children:n?Object(p.jsx)(h,{user:n,onSignOut:function(){s(null)}}):Object(p.jsx)(O,{onSubmit:function(e){s({nickname:e,uid:(new Date).getTime()})}})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(v,{})}),document.getElementById("root")),N()}},[[27,1,2]]]);
//# sourceMappingURL=main.a4d673c8.chunk.js.map